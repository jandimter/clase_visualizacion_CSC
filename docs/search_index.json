[["index.html", "Capítulo 1 Resumen", " Capítulo 1 Resumen Este bookdown fue diseñado para ser presentado en la cuarta clase del ramo Ciencias Sociales Computacionales: Análisis de Redes Sociales y Procesamiento de Lenguaje Natural, impartida por el profesor Naim Bro Khomasi el segundo semestre del 2021. Curso: Ciencias Sociales Computacionales - Análisis de Redes Sociales y Procesamiento de Lenguaje Natural. Institución: Universidad de Chile. Profesor: Naim Bro Khomasi. Ayudantes: Jan Dimter y Nicolas Godoy. Fecha: 26 de agosto de 2021. "],["introducción-clase.html", "Capítulo 2 Introducción clase 2.1 Sobre el dataset", " Capítulo 2 Introducción clase En esta clase realizaremos ejercicios de visualización a través de las librerías ggplot2 y plotly. Utilizaremos el dataset mpg para la creación de gráficos. Éste se encuentra contenido en tidyverse.1 Realizamos la instalación y carga de los paquetes con el siguiente código: #install.packages(&quot;tidyverse&quot;) #install.packages(&quot;plotly&quot;) library(tidyverse) library(plotly) 2.1 Sobre el dataset Según la documentación de mpg (puedes encontrarla usando en tu consola el comando ?mpg una vez hayas instalado ggplot2), las variables son las siguientes: Variable Detalle manufacturer Marca del auto model Modelo del auto displ Cilindrada, en litros. year Año de manufactura cyl Número de cilindros trans Tipo de transmisión drv Tipo de transmisión (f = transmisión delantera, r = transmisión trasera, 4 = 4x4) cty Millas por galón en ciudad hwy Millas por galón en autopista fl Tipo de combustible class Tipo de auto Una vez cargados los paquetes, revisamos las primeras y últimas filas de nuestro dataset: # Usamos knitr::kable() para ajustar el resultado a la visualización html. # Una alternativa más simple es usar por separadop las funciones head() y tail(). knitr::kable(mpg[c(1:3,(nrow(mpg)-2):nrow(mpg)),]) manufacturer model displ year cyl trans drv cty hwy fl class audi a4 1.8 1999 4 auto(l5) f 18 29 p compact audi a4 1.8 1999 4 manual(m5) f 21 29 p compact audi a4 2.0 2008 4 manual(m6) f 20 31 p compact volkswagen passat 2.8 1999 6 auto(l5) f 16 26 p midsize volkswagen passat 2.8 1999 6 manual(m5) f 18 26 p midsize volkswagen passat 3.6 2008 6 auto(s6) f 17 26 p midsize Esta librería llama paquetes adicionales del universo tidyverse tales como ggplot2, dplyr, readr, stringr, etc.↩︎ "],["ggplot2-componentes-base.html", "Capítulo 3 ggplot2: Componentes base", " Capítulo 3 ggplot2: Componentes base La librería ggplot2 de Hadley Wickham et al. (2005), parte del ecosistema de paquetes tidyverse, es un sistema declarativo para la creación de gráficos. ¿Qué quiere decir eso? Que le señalamos a ggplot2 cuál es nuestra data, cómo mapearla, qué elementos gráficos usar, y ggplot se encarga del resto. ggplot(mpg, aes(displ, hwy, colour = class)) + geom_point() Son 3 los componentes base a la hora de trabajar con ggplot2: Data: literalmente son los datos que le entregaremos. Comunmente serán data frames o similares. Pueden estar agrupados o no. En el caso de nuestro ejemplo corresponde a mpg. Aesthetic mapping: corresponde a indicadores en torno a la data que usamos. Posiblemente los más comunes e importantes son los parámetros x e y (ej. en un diagrama de dispersión). También podemos incorporar distinción por colores, formas, etc. En nuestra sintaxis de ejemplo, corresponde a aes(displ, hwy, colour = class). Geometry: Hasta ahora hemos señalado nuestra data y qué representación le daremos en el gráfico, sin embargo, nos falta el último componente: ¿qué tipo de gráfico usaremos? Es posible generar puntos, barras, cajas, etc. Las geometrías suelen ser combinables dependiendo del tipo de información con la que trabajes. En nuestro código de ejemplo corresponde a geom_point(). El resultado de ejemplo es el siguiente: "],["ggplot-principales-tipos-de-gráficos.html", "Capítulo 4 ggplot: Principales tipos de gráficos 4.1 1. Histograma (histogram) 4.2 2. Gráfico de densidad (density plot) 4.3 3. Diagrama de cajas (boxplot) 4.4 4. Diagrama de dispersión (scatterplot) 4.5 5. Gráfico de líneas (lineplot)", " Capítulo 4 ggplot: Principales tipos de gráficos Revisaremos rápidamente gráficos que puedes constuir usando ggplot. Usaremos para este fin mpg. 4.1 1. Histograma (histogram) histograma &lt;- ggplot(mpg, aes(x=cty)) + geom_histogram() histograma ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 4.2 2. Gráfico de densidad (density plot) densidad&lt;-ggplot(mpg, aes(x=cyl))+ geom_density() densidad 4.3 3. Diagrama de cajas (boxplot) cajas&lt;-ggplot(mpg, aes(x=manufacturer, y=cty)) + geom_boxplot() cajas 4.4 4. Diagrama de dispersión (scatterplot) dispersion&lt;-ggplot(mpg, aes(x=cty, y=hwy)) + geom_point() dispersion 4.5 5. Gráfico de líneas (lineplot) #Filtramos por un modelo en específico lineas&lt;-ggplot(mpg[mpg$model==&quot;range rover&quot;,], aes(x=year, y=hwy, group=manufacturer)) + geom_line() lineas "],["parámetros.html", "Capítulo 5 Parámetros 5.1 Color 5.2 Formas 5.3 Tamaño 5.4 Mezclémoslas 5.5 Orden 5.6 Facet wrap y Facet grid", " Capítulo 5 Parámetros Si bien los ejemplos anteriores son simples en cuanto a código, la calidad de la visualización es poca. Podemos mejorar los gráficos utilizando argumentos y funciones. 5.1 Color Una gran opción para mejorar nuestros gráficos es incorporar colores. Estos pueden ser iguales para todas las formas como aquí: histograma &lt;- ggplot(mpg, aes(x=cty, fill=&quot;red&quot;)) + geom_histogram() histograma ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ¿Lo ingresamos correctamente? ¿Es el color de relleno una variable categórica? Lo correcto es incorporarlo como característica de la forma geométrica: histograma &lt;- ggplot(mpg, aes(x=cty)) + geom_histogram(fill=&quot;red&quot;) histograma ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ¿Y si queremos usar los colores para distinguir en relación a una variable categórica? Ahora sí lo incorporamos al mapeo estético: histograma &lt;- ggplot(mpg, aes(x=cty, fill=manufacturer)) + geom_histogram() histograma ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 5.2 Formas Al igual que con los colores, podemos personalizar las formas de nuestros gráficos (en particular de nuestros geom_points()). Para esto modificamos el argumento shape. dispersion&lt;-ggplot(mpg, aes(x=cty, y=hwy, shape=as.factor(cyl))) + geom_point() dispersion 5.3 Tamaño dispersion&lt;-ggplot(mpg, aes(x=manufacturer, y=cty, size=displ)) + geom_point() dispersion 5.4 Mezclémoslas dispersion&lt;-ggplot(mpg, aes(x=manufacturer, y=cty, size=displ, shape=as.factor(year), color=as.factor(cyl)))+ geom_point() dispersion 5.5 Orden Podemos utilizar la función reorder() para cambiar el orden de un eje. El primer argumento define los datos a reordenar. El segundo define que variable se tomará como referencia para reordenar. El tercer argumento define la función que se usará para reordenar. Por defecto se usará la media, pero podemos utilizar otras. cajas&lt;-ggplot(mpg, aes(x=reorder(manufacturer, cty, median), y=cty)) + geom_boxplot() cajas Para invertir el orden agregando un guión (“-”) antes del segundo argumento. #Creamos datos de ejemplo df &lt;- data.frame(nombres = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;,&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), resultado = c(2.3, 1.9, 3.2,4.3, 0.9, 2.2), tipo= c(&quot;alpha&quot;,&quot;alpha&quot;,&quot;beta&quot;,&quot;beta&quot;,&quot;beta&quot;,&quot;beta&quot;)) histograma &lt;- ggplot(df,aes(x=reorder(nombres,-resultado), #Aquí reordenamos decrecientemente y=resultado, fill=tipo)) + geom_col() histograma 5.6 Facet wrap y Facet grid A través de la función facet_wrap() podemos separar nuestro gráfico según grupos contenidos en una variable. el argumento ncol= permite especificar la cantidad de columnas con sub-gráficos requerida. dispersion&lt;-ggplot(mpg, aes(x=class, y=cty, color=as.factor(cyl)))+ geom_point() dispersion+facet_wrap(~ manufacturer, ncol = 4) dispersion+facet_wrap(~ year, ncol = 1) "],["ggplot-personalización.html", "Capítulo 6 ggplot: Personalización 6.1 Títulos y ejes 6.2 Etiqueta leyenda 6.3 Posición leyenda 6.4 Añadir subtítulo y nota 6.5 Saltos de línea 6.6 Girar ejes 6.7 Rotar etiquetas eje", " Capítulo 6 ggplot: Personalización Es posible que, aunque a nivel de datos tengamos nuestra tarea completa, queden elementos por perfeccionar en cuanto visualización. Revisaremos las principales opciones de personalización. 6.1 Títulos y ejes dispersion&lt;-dispersion+ ggtitle(&quot;Figura 1: Gráfico de dispersión&quot;)+ #Se añade título xlab(&quot;Tipo de vehículo&quot;) + #Añade etiqueta eje horizontal ylab(&quot;Rendimiento en ciudad&quot;) #Añade etiqueta eje vertical dispersion 6.2 Etiqueta leyenda Es importante escribir correctamtente el elemento respectivo a la leyenda. En este ejemplo corresponde a color, sin embargo también podría ser shape o fill. dispersion&lt;-dispersion+labs(color = &quot;Cilindrada&quot;) dispersion 6.3 Posición leyenda La función theme() nos permite editar muchos aspectos de nuestro gráfico. Uno de estos es la posición de la leyenda: dispersión&lt;-dispersion+theme(legend.position=&#39;bottom&#39;) #Para colocarlo arriba usar &#39;top&#39; dispersión 6.4 Añadir subtítulo y nota dispersion&lt;-dispersion+labs(subtitle = &quot;Rendimiento en ciudad según tipo de vehículo&quot;, caption = &quot;Fuente: Datos contenidos en mpg.&quot;) dispersion 6.5 Saltos de línea Para usar la tipografía con un estilo especial dentro de un texto a través de dispersion+labs(subtitle = &quot;Rendimiento en ciudad\\nsegún tipo\\nde vehículo&quot;, caption = &quot;Fuente: Datos contenidos en mpg.&quot;) 6.6 Girar ejes A través de la función coord_flip() es posible intercambiar los ejes de nuestro gráfico: dispersion+ coord_flip() 6.7 Rotar etiquetas eje dispersion + theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)) dispersion + theme(axis.text.x = element_text(angle = 45, hjust=1)) dispersion + theme(axis.text.y = element_text(angle = 45, hjust=1)) ## Temas completos dispersion + theme_bw() dispersion + theme_dark() dispersion + theme_minimal() dispersion + theme_void() "],["plotly.html", "Capítulo 7 Plotly 7.1 (ggplotly) 7.2 Animar", " Capítulo 7 Plotly 7.1 (ggplotly) Muchas veces nos enfrentaremos a datos complejos que pueden resultar confusos al usuario. Es posible convertir nuestros gráficos elaborados en ggplot a una versión interactiva fácilmente gracias al paquete. Si bien Plotly tiene su propia sintaxis, incorpora la función ggplotly() que solo requiere ingresar como input un pbjeto ggplot. ggplotly(dispersion) 7.2 Animar library(gapminder) p &lt;- ggplot(gapminder, aes(gdpPercap, lifeExp, color = continent)) + geom_point(aes(size = pop, frame = year, ids = country)) + scale_x_log10() fig &lt;- ggplotly(p) fig "]]
